'use client';
import { useEffect, useState, useCallback } from 'react';
import { Container, Row, Col, ButtonGroup, ToggleButton } from "react-bootstrap";
import { usePathname, useRouter, useSearchParams } from 'next/navigation';

function DashboardToggleMap() {
  const [radioValue, setRadioValue] = useState('1');
  const searchParams = useSearchParams();
  const router = useRouter();
  const pathName = usePathname();

  const createQueryString = useCallback(
    (name, value) => {
      const params = new URLSearchParams(searchParams.toString());
      params.set(name, value);

      return params.toString();
    },
    [searchParams]
  );

  useEffect(() => {
    if (radioValue === '1') {
      router.push(pathName + '?' + createQueryString('type', 'chart'));
    } else {
      router.push(pathName + '?' + createQueryString('type', 'geomap'));
    }
  }, [radioValue])

  return (
    <>
      <Container fluid className="Law-Enforcement-Analysis p-2 d-flex align-items-center justify-content-between" >
        <div className="d-flex flex-column w-50 p-2">
          <h2 className="metro__main-title">Crime Preview</h2>
        </div>

        <div className="d-flex flex-column justify-content-end" style={{ 'width': '202px' }}>
          <ButtonGroup className="metro__tab-selection">
            <ToggleButton
              id="radio-charts"
              type="radio"
              variant="outline-primary"
              name="radio"
              value="1"
              checked={radioValue === '1'}
              onChange={(e) => setRadioValue(e.currentTarget.value)}
              className="d-flex gap-2 justify-content-center align-items-center"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17"
                fill="none">
                <path
                  d="M14.96 0C14.5841 0 14.28 0.304141 14.28 0.68C14.28 0.779609 14.3052 0.87125 14.3438 0.95625L11.6237 4.76C11.6025 4.75867 11.5813 4.76 11.56 4.76C11.4245 4.76 11.2944 4.79719 11.1881 4.86625L8.84 3.6975C8.81742 3.34156 8.52125 3.06 8.16 3.06C7.78414 3.06 7.48 3.36414 7.48 3.74C7.48 3.77586 7.48531 3.81172 7.49062 3.84625L5.00437 5.8225C4.92867 5.79328 4.84633 5.78 4.76 5.78C4.42 5.78 4.14109 6.02836 4.09062 6.35375L1.77437 7.28875C1.65883 7.19844 1.51672 7.14 1.36 7.14C0.984141 7.14 0.68 7.44414 0.68 7.82C0.68 8.19586 0.984141 8.5 1.36 8.5C1.70266 8.5 1.98289 8.24633 2.02938 7.91563L4.34562 6.99125C4.46117 7.08156 4.60328 7.14 4.76 7.14C5.13586 7.14 5.44 6.83586 5.44 6.46C5.44 6.42414 5.43469 6.38828 5.42938 6.35375L7.91563 4.3775C7.99133 4.40672 8.07367 4.42 8.16 4.42C8.29547 4.42 8.42562 4.38281 8.53187 4.31375L10.88 5.4825C10.9026 5.83844 11.1988 6.12 11.56 6.12C11.9359 6.12 12.24 5.81586 12.24 5.44C12.24 5.34039 12.2148 5.24875 12.1763 5.16375L14.8962 1.36C14.9175 1.36133 14.9388 1.36 14.96 1.36C15.3359 1.36 15.64 1.05586 15.64 0.68C15.64 0.304141 15.3359 0 14.96 0ZM13.6 4.42V16.32H16.32V4.42H13.6ZM6.8 7.48V16.32H9.52V7.48H6.8ZM10.2 9.18V16.32H12.92V9.18H10.2ZM3.4 10.2V16.32H6.12V10.2H3.4ZM0 11.56V16.32H2.72V11.56H0Z"
                  fill="white" />
              </svg>
              <span>Charts</span>
            </ToggleButton>

            <ToggleButton
              id="radio-map"
              type="radio"
              variant="outline-primary"
              name="radio"
              value="2"
              checked={radioValue === '2'}
              onChange={(e) => setRadioValue(e.currentTarget.value)}
              className="d-flex gap-2 justify-content-center align-items-center"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17"
                fill="none">
                <path d="M12.998 0C11.2786 0 9.87942 1.39862 9.87942 3.11805C9.87942 4.54084 12.0812 7.18803 12.756 7.96548C12.877 8.10403 13.1182 8.10455 13.2394 7.96548C13.9141 7.18829 16.116 4.5411 16.116 3.11805C16.116 1.39862 14.7174 0 12.998 0ZM12.998 1.10329C14.1083 1.10329 15.0112 2.00675 15.0112 3.11702C15.0112 4.22728 14.1083 5.13023 12.998 5.13023C11.8877 5.13023 10.9843 4.22728 10.9843 3.11702C10.9843 2.00675 11.8877 1.10329 12.998 1.10329ZM12.9975 1.36851C12.5376 1.37434 12.0985 1.56113 11.7754 1.8884C11.4522 2.21568 11.271 2.65709 11.271 3.11702C11.271 3.57694 11.4522 4.01835 11.7754 4.34563C12.0985 4.6729 12.5376 4.85969 12.9975 4.86552C13.4574 4.85969 13.8964 4.6729 14.2196 4.34563C14.5427 4.01835 14.7239 3.57694 14.7239 3.11702C14.7239 2.65709 14.5427 2.21568 14.2196 1.8884C13.8964 1.56113 13.4574 1.37434 12.9975 1.36851ZM7.18635 2.28981C7.07216 2.28987 6.95776 2.29252 6.84358 2.29756C6.78474 2.30002 6.72942 2.30454 6.67503 2.30894C6.68457 2.33789 6.69261 2.36788 6.69882 2.3989C6.76383 2.75447 6.58882 3.07061 6.41963 3.37603C6.2582 3.66775 6.10556 3.94293 6.19422 4.20634C6.30266 4.5252 6.71924 4.65135 7.07003 4.72541C7.27334 4.76768 7.49255 4.81318 7.66561 4.9529C7.99727 5.22742 7.98784 5.67631 7.97943 6.07221C7.97788 6.14898 7.97646 6.22498 7.97737 6.29866C7.99223 7.33447 8.83443 8.32053 9.85512 8.49644C9.93978 8.51001 10.0275 8.51958 10.1152 8.52901C10.3151 8.5506 10.5218 8.5727 10.7201 8.64534C11.2845 8.85291 11.5889 9.37379 11.8833 9.87736C12.1131 10.2703 12.3508 10.6765 12.7069 10.915C12.9372 11.0693 13.2362 11.1638 13.5951 11.1952C13.7928 11.2149 13.9845 11.212 14.1809 11.1869C14.1892 11.154 14.1989 11.1204 14.2057 11.0882L14.2161 11.051C14.2304 10.9879 14.2416 10.9287 14.2528 10.8705L14.2584 10.8416C14.2742 10.7657 14.287 10.6938 14.2972 10.6224C14.3105 10.5449 14.3207 10.4738 14.3282 10.4C14.3392 10.3208 14.3465 10.2464 14.3541 10.1715C14.3568 10.1479 14.3593 10.1268 14.3593 10.1064C14.3652 10.048 14.3679 10.004 14.3706 9.96008L14.3753 9.88718C14.3803 9.78817 14.383 9.71437 14.383 9.63798L14.3856 9.48185C14.3856 9.3968 14.3833 9.31434 14.381 9.22955C14.3807 9.22464 14.3807 9.21947 14.3805 9.21456C14.3805 9.20965 14.3805 9.20545 14.3805 9.2006C14.3778 9.11671 14.3726 9.03516 14.3649 8.9514C14.3646 8.9474 14.3644 8.91922 14.3644 8.91521C14.3566 8.83068 14.349 8.74311 14.3391 8.65568C14.339 8.65484 14.3387 8.65438 14.3386 8.65361C14.3283 8.56688 14.3156 8.47763 14.3029 8.39045C14.2764 8.20821 14.2427 8.03055 14.2016 7.85846C14.1879 7.7948 14.1713 7.7325 14.1545 7.67027C14.1484 7.6461 14.1429 7.62128 14.1364 7.59737C14.1159 7.52215 14.0952 7.45151 14.0739 7.37971C13.8335 7.6777 13.6131 7.93859 13.439 8.13919C13.3278 8.26663 13.1674 8.33927 12.998 8.33927C12.8285 8.33927 12.6675 8.26637 12.5565 8.13919C11.6719 7.12005 9.61472 4.59112 9.61472 3.11805C9.61472 2.98324 9.62515 2.85121 9.64057 2.72047C9.57397 2.69617 9.50754 2.67129 9.43945 2.64861C9.41299 2.63924 9.38901 2.63388 9.36345 2.62534C9.28749 2.60098 9.21165 2.577 9.1339 2.55555C9.03031 2.52382 8.93101 2.49894 8.83146 2.47645C8.81297 2.47238 8.79569 2.46895 8.77769 2.46507C8.69345 2.44536 8.60927 2.42791 8.52539 2.41337L8.50523 2.40924C8.39666 2.38823 8.29171 2.37292 8.18365 2.35754C7.95953 2.32781 7.73877 2.30739 7.52912 2.29756C7.4148 2.29227 7.30054 2.28974 7.18635 2.28981ZM6.40361 2.33841C5.03342 2.48491 3.76081 3.01504 2.69462 3.87649C2.79928 3.92309 2.90404 3.97311 3.00741 4.03004C3.21072 4.14404 3.46431 4.30651 3.63247 4.55894C3.81174 4.8314 3.84974 5.15983 3.73225 5.41613V5.41665C3.58141 5.74146 3.25441 5.86812 2.93813 5.99104C2.67317 6.09379 2.42268 6.19138 2.29446 6.39378C2.14725 6.62308 2.19869 6.91622 2.2531 7.22668C2.29007 7.43762 2.32807 7.65579 2.30894 7.87242C2.26293 8.43789 1.83963 8.87476 1.38867 9.26264C1.00131 9.59339 0.540915 9.95516 0.0382583 10.1824C0.254947 12.4271 1.53637 14.4511 3.44686 15.6192C3.57518 15.0705 3.6147 14.5065 3.55388 13.9374C3.53928 13.799 3.51873 13.6591 3.49856 13.5191C3.42334 12.9977 3.34579 12.4588 3.54613 11.9557C3.70834 11.5504 4.02914 11.2391 4.34386 10.9553C4.72541 10.6107 5.14509 10.3007 5.64154 10.3597C5.86838 10.3873 6.07596 10.5041 6.19732 10.672C6.31442 10.8411 6.34389 11.0321 6.37207 11.2169C6.37827 11.2581 6.38448 11.2994 6.39172 11.34C6.50184 11.9617 6.90859 12.5174 7.26752 13.0078C7.30824 13.0664 7.34275 13.1079 7.38333 13.1283C7.44666 13.1577 7.53016 13.1227 7.66096 13.0611C7.72869 13.0293 7.79758 12.9976 7.86621 12.9778C8.22437 12.8795 8.59234 13.0744 8.96381 13.5569C9.49115 14.2314 9.96163 14.9577 10.3618 15.7143C10.3932 15.7738 10.4219 15.835 10.4512 15.8958C12.2424 14.9878 13.5614 13.3856 14.1064 11.4604C14.024 11.468 13.9407 11.4728 13.8562 11.4728C13.762 11.4728 13.6666 11.4684 13.5703 11.4589C13.1681 11.4236 12.8275 11.3146 12.5596 11.1352C12.1529 10.8629 11.8996 10.4299 11.6548 10.0113C11.3714 9.5267 11.1041 9.06876 10.6291 8.89401C10.4612 8.83262 10.2793 8.81297 10.0867 8.79216C9.99459 8.78221 9.9023 8.77213 9.8117 8.75753C8.65076 8.55745 7.72959 7.47923 7.71266 6.30228C7.71176 6.2255 7.71305 6.14627 7.71473 6.06652C7.7221 5.71418 7.72985 5.35008 7.4981 5.15815C7.37609 5.05966 7.20587 5.02398 7.02556 4.9865C6.59567 4.89577 6.09509 4.73692 5.94347 4.29113C5.81745 3.91669 6.00577 3.57689 6.18802 3.24782C6.34131 2.97083 6.48633 2.70897 6.43876 2.44853C6.43146 2.41202 6.41854 2.37499 6.40361 2.33841ZM2.46507 4.06468C2.45131 4.07638 2.43825 4.08898 2.42475 4.10087C2.05936 4.42432 1.73073 4.78067 1.44244 5.16383C1.40971 5.20694 1.37917 5.25147 1.34783 5.29515C1.30611 5.35325 1.26466 5.41115 1.22478 5.47042C1.19748 5.51023 1.17266 5.55042 1.14671 5.59036C1.09899 5.66442 1.051 5.73861 1.00609 5.81422C0.994521 5.83393 0.98347 5.85364 0.972484 5.87316C0.925663 5.95375 0.880619 6.03498 0.837029 6.11719C0.830502 6.12972 0.822618 6.14291 0.816349 6.15545C0.813635 6.16863 0.801614 6.18556 0.795152 6.19732C0.793536 6.20023 0.792114 6.2032 0.790499 6.20611C0.747717 6.28954 0.706906 6.37388 0.667452 6.45893C0.652911 6.49021 0.638499 6.52207 0.62454 6.55354C0.528248 6.76926 0.441166 6.98924 0.366556 7.21375C0.366426 7.21408 0.366685 7.2144 0.366556 7.21479C0.328814 7.3284 0.294175 7.44298 0.262121 7.55859C0.259148 7.56932 0.255723 7.57986 0.252815 7.59065C0.188351 7.82724 0.136263 8.06797 0.0961627 8.31135C0.0946762 8.32027 0.0928991 8.32938 0.0915097 8.33824C0.0728329 8.45443 0.0574843 8.57134 0.0444623 8.68876C0.0436545 8.69652 0.0421681 8.70415 0.0413603 8.71203C0.0139914 8.96665 -2.64706e-08 9.22386 0 9.48288C0 9.61562 0.00436223 9.73944 0.0108571 9.86029C0.0115033 9.87464 0.013119 9.88873 0.0139591 9.90321C0.454899 9.68775 0.86611 9.36067 1.21651 9.06152C1.59638 8.73491 2.00507 8.34483 2.04527 7.85018C2.06155 7.66729 2.02665 7.46618 1.99253 7.27217C1.93178 6.92526 1.86858 6.56659 2.07112 6.25109C2.24561 5.97579 2.5487 5.8583 2.84197 5.74443C3.12141 5.63599 3.38586 5.5331 3.49184 5.30549C3.57043 5.13411 3.53889 4.89848 3.41171 4.70525C3.27509 4.50039 3.0551 4.36067 2.87868 4.26166C2.74228 4.1867 2.60328 4.12033 2.46507 4.06468ZM5.46473 10.6193C5.12976 10.644 4.81456 10.887 4.5212 11.1518C4.22948 11.4149 3.93272 11.7013 3.79171 12.0539C3.6176 12.4911 3.68714 12.9719 3.76068 13.4814C3.78137 13.6246 3.80217 13.7679 3.81704 13.9095C3.88409 14.5363 3.84111 15.1593 3.68986 15.7624C3.71529 15.7766 3.74123 15.7899 3.76689 15.8038C3.86751 15.8587 3.96884 15.9121 4.07192 15.962C4.09577 15.9734 4.12013 15.9848 4.1443 15.9961C4.23601 16.0392 4.32907 16.0795 4.42245 16.1186C4.46746 16.1374 4.51163 16.1564 4.55739 16.1745C4.6751 16.2209 4.79408 16.2651 4.91412 16.3053C4.96336 16.3213 5.01309 16.3355 5.0625 16.3508C5.12486 16.3701 5.18781 16.3884 5.25069 16.4061C5.32262 16.4266 5.39419 16.446 5.46576 16.464C5.52037 16.4776 5.57524 16.489 5.63017 16.5012C5.73199 16.524 5.83381 16.5455 5.9352 16.5632C6.01385 16.5772 6.09282 16.5897 6.17199 16.601C6.22159 16.6081 6.27155 16.6162 6.32037 16.6222C6.43117 16.6358 6.54229 16.6458 6.65384 16.6542C6.69685 16.6578 6.74024 16.6618 6.78205 16.6635C6.91877 16.6714 7.05616 16.6765 7.19359 16.6765C7.24907 16.6765 7.30378 16.6736 7.35903 16.6723C7.44359 16.6699 7.52848 16.6683 7.61236 16.6635C7.63143 16.6624 7.65062 16.6606 7.66975 16.6594C7.75189 16.6542 7.83377 16.6478 7.91533 16.6398C8.00677 16.631 8.09702 16.6197 8.18675 16.6067C8.21018 16.6034 8.2337 16.6009 8.25707 16.5974C8.31613 16.5899 8.37313 16.5812 8.42716 16.5705C8.51418 16.5555 8.60097 16.5391 8.68721 16.5209C8.76092 16.5053 8.83456 16.4892 8.90591 16.4697C9.00523 16.448 9.09762 16.4227 9.19026 16.3952C9.25621 16.3762 9.32177 16.3557 9.38724 16.3347C9.44656 16.316 9.50686 16.296 9.56767 16.2742C9.66157 16.2413 9.75521 16.2079 9.84789 16.1708C9.85845 16.1666 9.86757 16.1626 9.87787 16.1584C9.99132 16.1125 10.1044 16.064 10.216 16.0121C10.1877 15.9534 10.1583 15.8953 10.1281 15.8379C9.73531 15.0952 9.27324 14.3823 8.75494 13.7192C8.45469 13.3294 8.18068 13.1661 7.93756 13.2327C7.8834 13.2483 7.82847 13.2751 7.77367 13.301C7.62981 13.3686 7.4508 13.452 7.26752 13.3661C7.16851 13.3165 7.10544 13.2384 7.05193 13.1614C6.67788 12.6504 6.252 12.0684 6.13115 11.3865C6.12339 11.3437 6.11654 11.3003 6.10995 11.2567C6.08526 11.0945 6.062 10.9411 5.98122 10.8245C5.90379 10.7175 5.76433 10.6411 5.60949 10.6224C5.56084 10.6164 5.51258 10.6157 5.46473 10.6193Z" />
              </svg>
              <span>Map</span>
            </ToggleButton>
          </ButtonGroup>
        </div>
      </Container>
    </>
  );
}

export default DashboardToggleMap;
